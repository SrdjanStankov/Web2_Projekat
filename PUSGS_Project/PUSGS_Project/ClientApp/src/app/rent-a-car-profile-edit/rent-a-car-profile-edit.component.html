<form [formGroup]="editGroup" (ngSubmit)="onSubmit()">
  <div class="container profile-display">
    <div class="row">
      <div class="col-md-3">
        <label for="name">Name</label>
      </div>
      <div class="col-md-3 m-2">
        <input type="text" [class.is-invalid]="editGroup.get('name').invalid && editGroup.get('name').touched" id="name" class="form-control" formControlName="name" />
        <div *ngIf="(editGroup.get('name').invalid && editGroup.get('name').touched) || editGroup.get('name').dirty">
          <small *ngIf="editGroup.get('name').errors?.required" class="text-danger">Name is required</small>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label for="address">Address</label>
      </div>
      <div class="col-md-3 m-2">
        <input type="text" [class.is-invalid]="editGroup.get('address').invalid && editGroup.get('address').touched" id="address" class="form-control" formControlName="address" />
        <div *ngIf="(editGroup.get('address').invalid && editGroup.get('address').touched) || editGroup.get('address').dirty">
          <small *ngIf="editGroup.get('address').errors?.required" class="text-danger">Address is required</small>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label for="description">Opis</label>
      </div>
      <div class="col-md-3 m-2">
        <input type="text" [class.is-invalid]="editGroup.get('description').invalid && editGroup.get('description').touched" id="description" class="form-control" formControlName="description" />
        <div *ngIf="(editGroup.get('description').invalid && editGroup.get('description').touched) || editGroup.get('description').dirty">
          <small *ngIf="editGroup.get('description').errors?.required" class="text-danger">Address is required</small>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Cenovnik</label>
      </div>
      <div class="col-md-3 m-2">
        <p>TODO</p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Cars</label>
      </div>
      <div class="col-md-6">
        <div *ngFor="let car of rentACar.cars">
          <label class="col-md-3 m-2">{{car.name}}</label>
          <button *ngIf="backend.getLogedInUserType() == 'RentACarAdmin'" type="button" class="btn btn-warning m-2 col-md-2" (click)="editCar(car.id, contentEditCar)">Edit</button>
          <button *ngIf="backend.getLogedInUserType() == 'RentACarAdmin'" type="button" class="btn btn-danger m-2 col-md-2" (click)="removeCar(car.id)">Remove</button>
        </div>
        <div>
          <button *ngIf="backend.getLogedInUserType() == 'RentACarAdmin'" type="button" class="btn btn-success" (click)="addCar(content)">Add car</button>
        </div>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3">
        <label>Branches</label>
      </div>
      <div class="col-md-6">
        <div *ngFor="let branch of rentACar.branches">
          <label class="col-md-4">{{branch.name}}</label>
          <button *ngIf="backend.getLogedInUserType() == 'RentACarAdmin'" type="button" class="btn btn-danger m-2 col-md-2" (click)="removeBranch(branch.id)">Remove</button>
        </div>
        <div>
          <button *ngIf="backend.getLogedInUserType() == 'RentACarAdmin'" type="button" class="btn btn-success" (click)="addBranch(contentAddBranch)">Add branch</button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md">
        <button type="button" [disabled]="editGroup.invalid" class="btn btn-primary" (click)="onSubmit()">Save</button>
      </div>
    </div>
  </div>
</form>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-add-car">Profile update</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="formGroup">
      <div class="form-group">
        <label for="name">Name</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('name').invalid && formGroup.get('name').touched" type="text" autocomplete="on" id="name" class="form-control" name="name" formControlName="name">
        </div>
        <div *ngIf="(formGroup.get('name').invalid && formGroup.get('name').touched) || formGroup.get('name').dirty">
          <small *ngIf="formGroup.get('name').errors?.required" class="text-danger">Name is required</small>
        </div>

        <br />

        <label for="passengerNumber">Number of passengers</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('passengerNumber').invalid && formGroup.get('passengerNumber').touched" type="number" autocomplete="on" id="passengerNumber" class="form-control" name="passengerNumber" formControlName="passengerNumber">
        </div>
        <div *ngIf="(formGroup.get('passengerNumber').invalid && formGroup.get('passengerNumber').touched) || formGroup.get('passengerNumber').dirty">
          <small *ngIf="formGroup.get('passengerNumber').errors?.required" class="text-danger">Number of passenger is required</small>
        </div>

        <br />

        <label for="type">Type</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('type').invalid && formGroup.get('type').touched" type="text" autocomplete="on" id="type" class="form-control" name="type" formControlName="type">
        </div>
        <div *ngIf="(formGroup.get('type').invalid && formGroup.get('type').touched) || formGroup.get('type').dirty">
          <small *ngIf="formGroup.get('type').errors?.required" class="text-danger">Type is required</small>
        </div>

        <br />

        <label for="brand">Brand</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('brand').invalid && formGroup.get('brand').touched" type="text" autocomplete="on" id="brand" class="form-control" name="brand" formControlName="brand">
        </div>
        <div *ngIf="(formGroup.get('brand').invalid && formGroup.get('brand').touched) || formGroup.get('brand').dirty">
          <small *ngIf="formGroup.get('brand').errors?.required" class="text-danger">Brand is required</small>
        </div>

        <br />

        <label for="model">Model</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('model').invalid && formGroup.get('model').touched" type="text" autocomplete="on" id="model" class="form-control" name="model" formControlName="model">
        </div>
        <div *ngIf="(formGroup.get('model').invalid && formGroup.get('model').touched) || formGroup.get('model').dirty">
          <small *ngIf="formGroup.get('model').errors?.required" class="text-danger">Model is required</small>
        </div>

        <br />

        <label for="buildDate">Year built</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('buildDate').invalid && formGroup.get('buildDate').touched" type="number" autocomplete="on" id="buildDate" class="form-control" name="buildDate" formControlName="buildDate">
        </div>
        <div *ngIf="(formGroup.get('buildDate').invalid && formGroup.get('buildDate').touched) || formGroup.get('buildDate').dirty">
          <small *ngIf="formGroup.get('buildDate').errors?.required" class="text-danger">Year built is required</small>
        </div>

        <br />

        <label for="costPerDay">Cost per day</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroup.get('costPerDay').invalid && formGroup.get('costPerDay').touched" type="number" autocomplete="on" id="costPerDay" class="form-control" name="costPerDay" formControlName="costPerDay">
        </div>
        <div *ngIf="(formGroup.get('costPerDay').invalid && formGroup.get('costPerDay').touched) || formGroup.get('costPerDay').dirty">
          <small *ngIf="formGroup.get('costPerDay').errors?.required" class="text-danger">Cost per day is required</small>
        </div>

      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" [disabled]="formGroup.invalid" class="btn btn-outline-dark" (click)="modal.close('Save click')">Submit</button>
  </div>
</ng-template>

<ng-template #contentEditCar let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-edit-car">Profile update</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="formGroupEditCar">
      <div class="form-group">
        <label for="name">Name</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('name').invalid && formGroupEditCar.get('name').touched" type="text" autocomplete="on" id="name" class="form-control" name="name" formControlName="name">
        </div>
        <div *ngIf="(formGroupEditCar.get('name').invalid && formGroupEditCar.get('name').touched) || formGroupEditCar.get('name').dirty">
          <small *ngIf="formGroupEditCar.get('name').errors?.required" class="text-danger">Name is required</small>
        </div>

        <br />

        <label for="passengerNumber">Number of passengers</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('passengerNumber').invalid && formGroupEditCar.get('passengerNumber').touched" type="number" autocomplete="on" id="passengerNumber" class="form-control" name="passengerNumber" formControlName="passengerNumber">
        </div>
        <div *ngIf="(formGroupEditCar.get('passengerNumber').invalid && formGroupEditCar.get('passengerNumber').touched) || formGroupEditCar.get('passengerNumber').dirty">
          <small *ngIf="formGroupEditCar.get('passengerNumber').errors?.required" class="text-danger">Number of passenger is required</small>
        </div>

        <br />

        <label for="type">Type</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('type').invalid && formGroupEditCar.get('type').touched" type="text" autocomplete="on" id="type" class="form-control" name="type" formControlName="type">
        </div>
        <div *ngIf="(formGroupEditCar.get('type').invalid && formGroupEditCar.get('type').touched) || formGroupEditCar.get('type').dirty">
          <small *ngIf="formGroupEditCar.get('type').errors?.required" class="text-danger">Type is required</small>
        </div>

        <br />

        <label for="brand">Brand</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('brand').invalid && formGroupEditCar.get('brand').touched" type="text" autocomplete="on" id="brand" class="form-control" name="brand" formControlName="brand">
        </div>
        <div *ngIf="(formGroupEditCar.get('brand').invalid && formGroupEditCar.get('brand').touched) || formGroupEditCar.get('brand').dirty">
          <small *ngIf="formGroupEditCar.get('brand').errors?.required" class="text-danger">Brand is required</small>
        </div>

        <br />

        <label for="model">Model</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('model').invalid && formGroupEditCar.get('model').touched" type="text" autocomplete="on" id="model" class="form-control" name="model" formControlName="model">
        </div>
        <div *ngIf="(formGroupEditCar.get('model').invalid && formGroupEditCar.get('model').touched) || formGroupEditCar.get('model').dirty">
          <small *ngIf="formGroupEditCar.get('model').errors?.required" class="text-danger">Model is required</small>
        </div>

        <br />

        <label for="buildDate">Year built</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('buildDate').invalid && formGroupEditCar.get('buildDate').touched" type="number" autocomplete="on" id="buildDate" class="form-control" name="buildDate" formControlName="buildDate">
        </div>
        <div *ngIf="(formGroupEditCar.get('buildDate').invalid && formGroupEditCar.get('buildDate').touched) || formGroupEditCar.get('buildDate').dirty">
          <small *ngIf="formGroupEditCar.get('buildDate').errors?.required" class="text-danger">Year built is required</small>
        </div>

        <br />

        <label for="costPerDay">Cost per day</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupEditCar.get('costPerDay').invalid && formGroupEditCar.get('costPerDay').touched" type="number" autocomplete="on" id="costPerDay" class="form-control" name="costPerDay" formControlName="costPerDay">
        </div>
        <div *ngIf="(formGroupEditCar.get('costPerDay').invalid && formGroupEditCar.get('costPerDay').touched) || formGroupEditCar.get('costPerDay').dirty">
          <small *ngIf="formGroupEditCar.get('costPerDay').errors?.required" class="text-danger">Cost per day is required</small>
        </div>

      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" [disabled]="formGroupEditCar.invalid" class="btn btn-outline-dark" (click)="modal.close('Save click')">Submit</button>
  </div>
</ng-template>

<ng-template #contentAddBranch let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-add-branch">Add branch</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="formGroupAddBranch">
      <div class="form-group">
        <label for="name">Name</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupAddBranch.get('name').invalid && formGroupAddBranch.get('name').touched" type="text" autocomplete="on" id="name" class="form-control" name="name" formControlName="name">
        </div>
        <div *ngIf="(formGroupAddBranch.get('name').invalid && formGroupAddBranch.get('name').touched) || formGroupAddBranch.get('name').dirty">
          <small *ngIf="formGroupAddBranch.get('name').errors?.required" class="text-danger">Name is required</small>
        </div>

        <br />

        <label for="name">Address</label>
        <div class="input-group">
          <input [class.is-invalid]="formGroupAddBranch.get('address').invalid && formGroupAddBranch.get('address').touched" type="text" autocomplete="on" id="address" class="form-control" name="address" formControlName="address">
        </div>
        <div *ngIf="(formGroupAddBranch.get('address').invalid && formGroupAddBranch.get('address').touched) || formGroupAddBranch.get('address').dirty">
          <small *ngIf="formGroupAddBranch.get('address').errors?.required" class="text-danger">Name is required</small>
        </div>

      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" [disabled]="formGroupAddBranch.invalid" class="btn btn-outline-dark" (click)="modal.close('Save click')">Submit</button>
  </div>
</ng-template>
